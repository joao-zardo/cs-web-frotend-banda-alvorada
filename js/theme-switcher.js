document.addEventListener('DOMContentLoaded',()=>{const themeButtons=document.querySelectorAll('.theme-button');const body=document.body;const localStorageKey='themePreference';function applyTheme(theme){body.classList.remove('dark-mode','high-contrast-mode');if(theme==='dark'){body.classList.add('dark-mode')}else if(theme==='contrast'){body.classList.add('high-contrast-mode')}
themeButtons.forEach(button=>{const buttonTheme=button.dataset.theme;button.setAttribute('aria-checked',buttonTheme===theme?'true':'false')});try{localStorage.setItem(localStorageKey,theme)}catch(e){console.warn('LocalStorage não disponível. Preferência de tema não será salva.')}}
function loadInitialTheme(){let preferredTheme='light';try{const savedTheme=localStorage.getItem(localStorageKey);if(savedTheme&&['light','dark','contrast'].includes(savedTheme)){preferredTheme=savedTheme;console.log('Tema carregado do localStorage:',preferredTheme)}else{if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){preferredTheme='dark';console.log('Preferência do OS detectada: dark')}}}catch(e){console.warn('LocalStorage não disponível. Usando tema padrão.')}
applyTheme(preferredTheme)}
themeButtons.forEach(button=>{button.addEventListener('click',()=>{const selectedTheme=button.dataset.theme;applyTheme(selectedTheme)})});loadInitialTheme();if(window.matchMedia){window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',event=>{try{const savedTheme=localStorage.getItem(localStorageKey);if(!savedTheme){applyTheme(event.matches?'dark':'light');console.log('Preferência do OS mudou:',event.matches?'dark':'light')}}catch(e){}})}})